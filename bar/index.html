<html>
<head>
    <title>Bar chart</title>
    <script type="text/javascript" src="styles.js"></script>
    <link rel="stylesheet" type="text/css" href="../shared/page-styles.css">
</head>
<body>
    <div class="chart-container" data-mediatype="print"></div>
    <div class="chart-container" data-mediatype="web"></div>
    <div class="chart-container" data-mediatype="video"></div>
    <div class="chart-container" data-mediatype="social"></div>



    <script src="http://ft-interactive.github.io/visual-vocabulary/shared/d3.v4.js"></script>
    <script src="http://ft-interactive.github.io/visual-vocabulary/shared/svg2png.js"></script>
    <script src="../shared/ft-chartframe.js"></script>
    <script src="bar.js"></script>
    <script>
        
        //datafile
        var dataURL = "data.csv"
        
        //titles, footnotes
        var title = "Franklin Templeton funds' rollercoaster performance";
        var subtitle = "Percentage of assets in top-two peer group quartiles";//comment out subtitle assignment if not needed
        var source = "Source: Franklin Resources";
        



        //graph options
        var xMin=0
        var xMax=50
        var xAxisHighlight=0;
        var labels=false;//show numbers on bars
        var numTicksx=5;//rough number of ticks for x axis
        var ticks//=[0.2,0.3];//option to force tick values for online

        //Use the frames array to set unique values for each media type of frame
        // Print column sizes-- 1col 53.71mm: 2col 112.25mm: 3col 170.8mm: 4col 229.34mm: 5col 287.88mm: 6col 346.43
        var frames=[
        {name:"print",width:53.71,height:68,units:'mm',margins:[{top:5,right:5,bottom:5, left:3}],stylesheet:styleprint,legend:"hori"},
        {name:"web",width:600,height:400,units:'px',margins:[{top:10,right:35,bottom:5,left:10}],stylesheet:styleweb,legend:"hori"},
        {name:"social",width:560,height:750,units:'px',margins:[{top:36,right:50, bottom:25, left:50}],stylesheet:stylesoc,legend:"vert"},
        //{name:"video",width:1920,height:1080,units:'px',margins:[{top:80,right:207,bottom:50,left:207}],stylesheet:stylevid,legend:"hori",yLabel:"right"}
        ]
        
        //sets the padding inside the chart area

        drawFrames()
        
        d3.csv(dataURL,function(error, data){
            var parseDate = d3.timeFormat("%d-%b-%y").parse;

            var chartpadding=[
                {name:"print",margin:[{top:15, right:10, bottom:15, left:0}]},
                {name:"web",margin:[{top:0, right:5, bottom:12, left:10}]},
                {name:"social",margin:[{top:15, right:12, bottom:60, left:0}]},
                {name:"video",margin:[{top:55, right:5,bottom:68, left:0}]}];

            for (var i=0;i<frames.length;i++){
                var stylename=frames[i].stylesheet;
                var media = frames[i].name;
                var legend=frames[i].legend;
                var subYoffset=stylename.subOffset;
                var yLabel=frames[i].yLabel
                //  barChart(data, stylename, media, xMin, xMax, xAxisHighlight, chartpadding,legend, labels, numTicksx);
            }
        })//end data load

        function drawFrames(){
            function mmToPx(mm){
                var px = mm * 2.83464480558843;
                return px;
            }

            for (var i=0;i<frames.length;i++){
                var stylename=frames[i].stylesheet;
                var media = frames[i].name;
                if(frames[i].units=="mm") {
                    framewidth = mmToPx(frames[i].width);
                    frameheight = mmToPx(frames[i].height);
                } else {
                    framewidth = frames[i].width;
                    frameheight = frames[i].height;
                }
                var framemargin = frames[i].margins[0];
                var titleYoffset=stylename.titleOffset;
                var subYoffset=stylename.subOffset
                var frame = new drawFrame()
                    .styleSheet('/shared/web-style.css')
                    .width(framewidth)
                    .height(frameheight)
                    .margin(framemargin)
                    .title(title)
                    .source(source)

                //optional elements
                if (subtitle){
                    frame.subtitle(subtitle)
                }
                d3.select("body").call(frame)
            }
        }


            
    </script>
</body>
</html>